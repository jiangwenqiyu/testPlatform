<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>table拖拽</title>
    <style>
        tr {
            cursor: pointer;
        }

        td {
            padding: 5px 10px;
        }
    </style>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="../js/jq_ui/jquery-ui.js"></script>
</head>

<body>
<table id="sort">
    <thead>
    <tr>
        <th class="index">序号</th>
        <th class="year">年份</th>
        <th>标题</th>
        <th>作者</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="index">1</td>
        <td class="year">2011</td>
        <td>第一行</td>
        <td>红发---红发</td>
    </tr>
    <tr>
        <td class="index">2</td>
        <td class="year">2012</td>
        <td>第二行</td>
        <td>多夫朗明哥</td>
    </tr>
    <tr>
        <td class="index">3</td>
        <td class="year">2013</td>
        <td>第三行</td>
        <td>甚平---甚平</td>
    </tr>
    <tr>
        <td class="index">4</td>
        <td class="year">2014</td>
        <td>第四行</td>
        <td>鹰眼---鹰眼</td>
    </tr>
    </tbody>
</table>
<script>
    $(document).ready(function() {
        var fixHelperModified = function(e, tr) {
                //children() 方法返回返回被选元素的所有直接子元素
                var $originals = tr.children();
                //clone() 方法生成被选元素的副本，包含子节点、文本和属性
                var $helper = tr.clone();
                //each() 方法规定为每个匹配元素规定运行的函数
                $helper.children().each(function(index) {
                    //width() 方法返回或设置匹配元素的宽度
                    //eq() 方法将匹配元素集缩减值指定 index 上的一个
                    $(this).width($originals.eq(index).width())
                });
                return $helper;
            },
            updateIndex = function(e, ui) {
                //ui.item - 表示当前拖拽的元素 
                //parent() 获得当前匹配元素集合中每个元素的父元素，使用选择器进行筛选是可选的
                $('td.index', ui.item.parent()).each(function(i) {
                    //html() 方法返回或设置被选元素的内容 (inner HTML)
                    $(this).html(i + 1);
                });
            };
        $("#sort tbody").sortable({
            //设置是否在拖拽元素时，显示一个辅助的元素。可选值：'original', 'clone' 
            helper: fixHelperModified,
            //当排序动作结束时触发此事件。 
            stop: updateIndex
        }).disableSelection();
    });
</script>
</body>

</html>
